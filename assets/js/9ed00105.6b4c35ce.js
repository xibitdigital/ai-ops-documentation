"use strict";(self.webpackChunkxbt_gitlab_ai_plugin_docs_site=self.webpackChunkxbt_gitlab_ai_plugin_docs_site||[]).push([[873],{2163:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>d});var t=i(4848),s=i(8453);const a={sidebar_position:2,title:"Configuration"},r=void 0,o={id:"configuration",title:"Configuration",description:"Environment Variables",source:"@site/docs/configuration.md",sourceDirName:".",slug:"/configuration",permalink:"/ai-ops-documentation/configuration",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Configuration"},sidebar:"tutorialSidebar",previous:{title:"AI OPS",permalink:"/ai-ops-documentation/intro"},next:{title:"FAQ",permalink:"/ai-ops-documentation/faq"}},l={},d=[{value:"Environment Variables",id:"environment-variables",level:2},{value:"GitOps AI Integration with GitLab CI/CD Pipeline",id:"gitops-ai-integration-with-gitlab-cicd-pipeline",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Pipeline Configuration",id:"pipeline-configuration",level:3},{value:"Code Analysis",id:"code-analysis",level:4},{value:"Example of a Different Stage Job",id:"example-of-a-different-stage-job",level:3},{value:"Code Review",id:"code-review",level:3},{value:"Environment Variable Setup",id:"environment-variable-setup",level:3},{value:"Full GitLab Sample Template for Integration",id:"full-gitlab-sample-template-for-integration",level:3}];function c(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,t.jsx)(n.p,{children:"To configure GitOps AI, set the following environment variables in your GitLab CI/CD settings:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"API_KEY:"})," The authentication key for the API."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"API_URL:"})," The URL endpoint of the API."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ACTION:"})," Specifies the operation to perform (either ",(0,t.jsx)(n.code,{children:"review"})," or ",(0,t.jsx)(n.code,{children:"analysis"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"CI_PIPELINE_PREVIOUS_JOB_STEP_NAME:"})," The name of the previous job step in the pipeline."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"CREATE_NOTE (Optional):"})," If set to ",(0,t.jsx)(n.code,{children:"true"}),", the service adds the AI-generated feedback as a note in the merge request."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"gitops-ai-integration-with-gitlab-cicd-pipeline",children:"GitOps AI Integration with GitLab CI/CD Pipeline"}),"\n",(0,t.jsx)(n.p,{children:"This guide provides detailed instructions on integrating GitOps AI into your GitLab CI/CD pipeline. By leveraging AI models, GitOps AI automates code reviews and analyses, helping to identify issues and provide suggestions for improvements. The integration is done through specific GitLab CI jobs triggered during certain pipeline events."}),"\n",(0,t.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"GitLab Project:"})," A GitLab project with an active CI/CD pipeline."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"API_KEY and API_URL:"})," Set up these variables in your GitLab CI/CD settings for secure access to the GitOps AI service."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"pipeline-configuration",children:"Pipeline Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Add the following jobs to your ",(0,t.jsx)(n.code,{children:".gitlab-ci.yml"})," file:"]}),"\n",(0,t.jsx)(n.h4,{id:"code-analysis",children:"Code Analysis"}),"\n",(0,t.jsx)(n.p,{children:"This job uses GitOps AI to analyze potential issues in the deployment process. It is manually triggered for non-protected branches and both commit branches or merge requests."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'## AI analysis\n# Job for analyzing potential issues in previous pipeline steps.\n# This job runs in the \'analyze\' stage and is configured to run manually on non-protected branches \n# and on both commit branches or merge requests.\nai_analyze_failures:\n    stage: analyze\n    image: xibitdigital/xbt-ai-gitlab-plugin:v.1.2\n    variables:\n        ACTION: analysis\n        CI_PIPELINE_PREVIOUS_JOB_STEP_NAME: dev_deploy\n    script:\n        - echo "AI > analyze possible issue on the ${CI_PIPELINE_PREVIOUS_JOB_STEP_NAME} step"\n    rules:\n        - if: \'$CI_COMMIT_REF_PROTECTED == "false" && ($CI_COMMIT_BRANCH || $CI_PIPELINE_SOURCE == "merge_request_event")\'\n          when: manual\n'})}),"\n",(0,t.jsx)(n.h3,{id:"example-of-a-different-stage-job",children:"Example of a Different Stage Job"}),"\n",(0,t.jsxs)(n.p,{children:["The following example illustrates configuring a job in a different stage, such as plan. A descriptive tag in the script output, ",(0,t.jsx)(n.code,{children:"<GIT_AI_OPS>"}),", helps the analysis step by marking specific points in the pipeline output."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'# plan:\n#     stage: plan\n#     script:\n#         - echo "<GIT_AI_OPS> Starting the planning stage."\n#         - make init\n#         - # Add other commands as needed\n'})}),"\n",(0,t.jsx)(n.h3,{id:"code-review",children:"Code Review"}),"\n",(0,t.jsx)(n.p,{children:"This job automates the code review process using GitOps AI and can add review notes to the merge request."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"## AI MR review\n# Job for performing automated code reviews during merge requests.\n# This job runs in the 'review' stage and is configured to run manually when a merge request event is detected.\nai_merge_request_review:\n    stage: review\n    image: xibitdigital/xbt-ai-gitlab-plugin:v.1.2\n    variables:\n        ACTION: review\n        CREATE_NOTE: true\n    script:\n        - echo \"AI > running automated code review ...\"\n    rules:\n        - if: '$CI_PIPELINE_SOURCE == \"merge_request_event\"'\n          when: manual\n"})}),"\n",(0,t.jsx)(n.h3,{id:"environment-variable-setup",children:"Environment Variable Setup"}),"\n",(0,t.jsx)(n.p,{children:"Set the following variables in your GitLab CI/CD settings under the project\u2019s settings page:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"API_KEY: Secure key for authenticating with the GitOps AI API."}),"\n",(0,t.jsx)(n.li,{children:"API_URL: The endpoint URL for the GitOps AI API."}),"\n",(0,t.jsx)(n.li,{children:"CI_PIPELINE_PREVIOUS_JOB_STEP_NAME: The name of the previous job step, used for tracking job dependencies and contexts."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"full-gitlab-sample-template-for-integration",children:"Full GitLab Sample Template for Integration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"---\n# This is a sample GitLab CI/CD configuration template for integrating with the xbt-ai-gitlab plugin.\n# It includes two jobs, 'ai_analyze_failures' and 'ai_merge_request_review', which run in the 'analyze' and 'review' stages, respectively.\n# These stages must be defined in the main .gitlab-ci.yml file under the 'stages' section to ensure they are recognized by the pipeline.\n# Customize the variables, scripts, and rules as needed to suit your project's requirements.\n#\n# stages:\n#     - analyze\n#     - review\n## AI analysis\n# Job for analyzing potential issues in previous pipeline steps.\n# This job runs in the 'analyze' stage and is configured to run manually on non-protected branches \n# and on both commit branches or merge requests.\nai_analyze_failures:\n    stage: analyze\n    image: xibitdigital/xbt-ai-gitlab-plugin:v.1.2\n    variables:\n        ACTION: analysis\n        CI_PIPELINE_PREVIOUS_JOB_STEP_NAME: dev_deploy\n    script:\n        - echo \"AI > analyze possible issue on the ${CI_PIPELINE_PREVIOUS_JOB_STEP_NAME} step\"\n    rules:\n        - if: '$CI_COMMIT_REF_PROTECTED == \"false\" && ($CI_COMMIT_BRANCH || $CI_PIPELINE_SOURCE == \"merge_request_event\")'\n          when: manual\n# Example of a job in a different stage, such as 'plan'.\n# The 'plan' job illustrates how to configure it with a descriptive tag in your script output.\n# This tag, `<GIT_AI_OPS>`, helps the analysis step by marking specific points in the pipeline output.\n#\n# plan:\n#     stage: plan\n#     script:\n#         - echo \"<GIT_AI_OPS> Starting the planning stage.\"\n#         - make init\n#         - # Add other commands as needed\n## AI MR review\n# Job for performing automated code reviews during merge requests.\n# This job runs in the 'review' stage and is configured to run manually when a merge request event is detected.\nai_merge_request_review:\n    stage: review\n    image: xibitdigital/xbt-ai-gitlab-plugin:v.1.2\n    variables:\n        ACTION: review\n        CREATE_NOTE: true\n    script:\n        - echo \"AI > running automated code review ...\"\n    rules:\n        - if: '$CI_PIPELINE_SOURCE == \"merge_request_event\"'\n          when: manual\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var t=i(6540);const s={},a=t.createContext(s);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);